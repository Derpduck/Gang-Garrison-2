<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event category="DRAW" id="0">
  <actions>
    <action id="603" library="1">
      <!--action name: Code-->
      <kind>CODE</kind>
      <allowRelative>false</allowRelative>
      <question>false</question>
      <canApplyTo>true</canApplyTo>
      <actionType>CODE</actionType>
      <functionName/>
      <relative>false</relative>
      <not>false</not>
      <appliesTo>.self</appliesTo>
      <arguments>
        <argument kind="STRING">if(visible){

    var xoffset, yoffset, xsize, ysize;
    xoffset = view_xview[0]
    yoffset = view_yview[0]
    xsize = view_wview[0]
    ysize = view_hview[0]

    redOffset = 1
    bluOffset = 1
    draw_set_color(c_black)
    draw_set_valign(fa_center)

    for(i=0; i&lt;ds_list_size(global.players); i+=1){
        player = ds_list_find_value(global.players, i)
        if(player.team == TEAM_RED){
            spriteXOffset = xoffset
            spriteYOffset = yoffset+ysize+10-56*redOffset
            if(instance_exists(player.object) &amp;&amp; player.object != -1){
                draw_healthbar(spriteXOffset+44,spriteYOffset,spriteXOffset+86,spriteYOffset+46,player.object.hp*100/player.object.maxHp,c_black,c_red,c_green,3,false,false)
                if(player.object.hp &gt; (player.object.maxHp/3.5)){
                    hpColor = c_white
                }else{
                    hpColor = c_red
                }
                draw_set_halign(fa_center)
                draw_text_color(spriteXOffset+67,spriteYOffset+23,string(ceil(player.object.hp)),hpColor,hpColor,hpColor,hpColor,1)
            }
            draw_set_halign(fa_left);
            draw_sprite_ext(AdvSpecS,0,spriteXOffset,spriteYOffset,2,2,0,c_white,1);
            if(player.class == CLASS_MEDIC &amp;&amp; player.object != -1){
                draw_healthbar(spriteXOffset+40,spriteYOffset+12,spriteXOffset+43,spriteYOffset+34,player.object.currentWeapon.uberCharge*100/2000,c_black,c_gray,c_aqua,3,true,true)
            }
            draw_sprite_ext(Icon,player.class,spriteXOffset+10,spriteYOffset+10,2,2,0,c_white,1)
            draw_text_color(spriteXOffset,spriteYOffset-5,player.name,c_white,c_white,c_white,c_white,1)
            redOffset += 1
        }else if (player.team == TEAM_BLUE){
            spriteXOffset = xoffset+xsize-90
            spriteYOffset = yoffset+ysize+10-56*bluOffset
            if(instance_exists(player.object) &amp;&amp; player.object != -1){
                draw_healthbar(spriteXOffset+44,spriteYOffset,spriteXOffset+86,spriteYOffset+46,player.object.hp*100/player.object.maxHp,c_black,c_red,c_green,3,false,false)
                if(player.object.hp &gt; (player.object.maxHp/3.5)){
                    hpColor = c_white
                }else{
                    hpColor = c_red
                }
                draw_set_halign(fa_center)
                draw_text_color(spriteXOffset+67,spriteYOffset+23,string(ceil(player.object.hp)),hpColor,hpColor,hpColor,hpColor,1)
            }
            draw_set_halign(fa_right)
            draw_sprite_ext(AdvSpecS,1,spriteXOffset,spriteYOffset,2,2,0,c_white,1)
            if(player.class == CLASS_MEDIC &amp;&amp; player.object != -1){
                draw_healthbar(spriteXOffset+40,spriteYOffset+12,spriteXOffset+43,spriteYOffset+34,player.object.currentWeapon.uberCharge*100/2000,c_black,c_gray,c_aqua,3,true,true)
            }
            draw_sprite_ext(Icon,player.class,spriteXOffset+10,spriteYOffset+10,2,2,0,c_white,1)
            draw_text_color(spriteXOffset+90,spriteYOffset-5,player.name,c_white,c_white,c_white,c_white,1)
            bluOffset += 1
        }
    }
}
</argument>
      </arguments>
    </action>
  </actions>
</event>
