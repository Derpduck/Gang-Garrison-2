<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event category="CREATE" id="0">
  <actions>
    <action id="603" library="1">
      <!--action name: Code-->
      <kind>CODE</kind>
      <allowRelative>false</allowRelative>
      <question>false</question>
      <canApplyTo>true</canApplyTo>
      <actionType>CODE</actionType>
      <functionName/>
      <relative>false</relative>
      <not>false</not>
      <appliesTo>.self</appliesTo>
      <arguments>
        <argument kind="STRING">menu_create(144, 100, 500, 260, 32, 0, 112, 16);
menumode = true;

if (room != DSMOptionsRoom)
    menu_setdimmed();

menu_background(512, 24, 8, 12, 4);
bgtabs = true;

menu_addedit_boolean("Show Damage Indicator:", "global.damageIndicator", '
    DSM_write_ini("Damage Indicator", "Show Damage Indicator", argument0);
');

menu_addedit_boolean("Show Self Damage:", "global.damageIndicatorSelf", '
    DSM_write_ini("Damage Indicator", "Show Self Damage", argument0);
');

menu_addedit_boolean("Show Healing Given:", "global.damageIndicatorHealing", '
    DSM_write_ini("Damage Indicator", "Show Healing Given", argument0);
');

menu_addedit_boolean("Show Healing Target's Damage:", "global.damageIndicatorHealingTarget", '
    DSM_write_ini("Damage Indicator", "Show Healing Target Damage", argument0);
');

menu_addedit_num("Hitsound Volume:", "global.damageIndicatorVolume", '
    DSM_write_ini("Damage Indicator", "Volume", argument0);
', 100);

menu_addedit_script("Hitsound File:", menu_format_hitsound_filepath(global.damageIndicatorCustomSound), '
    var absPath;

    absPath = get_open_filename("Sound files|*.wav|*.mp3", working_directory + "\DSM\Sounds\*");

    if (absPath == "") {
        global.damageIndicatorCustomSound = absPath;
    } else {
        global.damageIndicatorCustomSound = getRelativePathIfDescendand(working_directory + "\DSM\Sounds\", absPath);
    }
    
    DSM_write_ini("Damage Indicator", "Custom Sound File", global.damageIndicatorCustomSound);
    
    load_custom_hitsound();
    
    return menu_format_hitsound_filepath(global.damageIndicatorCustomSound);
');

menu_divider("Appearance");

menu_addedit_select("Damage Indicator Color:", "global.damageIndicatorColor", '
    DSM_write_ini("Damage Indicator", "Damage Indicator Color", argument0);
');
DSM_menu_color_options();

menu_addedit_select("Self Damage Color:", "global.damageIndicatorColorSelf", '
    DSM_write_ini("Damage Indicator", "Self Damage Color", argument0);
');
DSM_menu_color_options();

menu_addedit_select("Healing Color:", "global.damageIndicatorColorHealing", '
    DSM_write_ini("Damage Indicator", "Healing Color", argument0);
');
DSM_menu_color_options();

menu_addedit_float("Scale:", "global.damageIndicatorScale", '
    DSM_write_ini("Damage Indicator", "Scale", argument0);
');

menu_addedit_float("Hold Duration:", "global.damageIndicatorHoldDuration", '
    DSM_write_ini("Damage Indicator", "Hold Duration", argument0);
');

menu_addedit_float("Fade Duration:", "global.damageIndicatorFadeDuration", '
    DSM_write_ini("Damage Indicator", "Fade Duration", argument0);
');

menu_addedit_boolean("Shrink While Fading:", "global.damageIndicatorShrink", '
    DSM_write_ini("Damage Indicator", "Shrink on Fade", argument0);
');

menu_addedit_boolean("Drop Shadow:", "global.damageIndicatorShadow", '
    DSM_write_ini("Damage Indicator", "Drop Shadow", argument0);
');

DSM_menu_tabs();
</argument>
      </arguments>
    </action>
  </actions>
</event>
