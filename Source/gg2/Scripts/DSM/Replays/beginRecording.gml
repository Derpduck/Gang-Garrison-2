global.recordingReplay = true;
var tempBuffer;
tempBuffer = buffer_create();
write_ubyte(tempBuffer, HELLO);
write_ubyte(tempBuffer, string_length(global.serverName));
write_string(tempBuffer, global.serverName);
write_ubyte(tempBuffer, string_length(global.currentMap));
write_string(tempBuffer, global.currentMap);
write_ubyte(tempBuffer, string_length(global.currentMapMD5));
write_string(tempBuffer, global.currentMapMD5);
write_ubyte(tempBuffer, global.serverPluginsRequired);
write_ubyte(tempBuffer, string_length(GameServer.pluginList));
write_string(tempBuffer, GameServer.pluginList);
socket = GameServer.serverPlayer.socket;
ServerJoinUpdate(tempBuffer);
write_ubyte(tempBuffer, PLAYER_JOIN);
write_ubyte(tempBuffer, 0);
write_ushort(global.replayBuffer, buffer_size(tempBuffer));
write_buffer(global.replayBuffer, tempBuffer);
buffer_destroy(tempBuffer);
